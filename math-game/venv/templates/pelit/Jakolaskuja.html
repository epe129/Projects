<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    
    <title>Jakolaskuja</title>
</head>
<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <ul class="nav navbar-nav">
                <li><a href="{{ url_for('index') }}">Peruslaskuja</a></li>
                <li><a href="{{ url_for('Pluslaskuja') }}">Pluslaskuja(+)</a></li>
                <li><a href="{{ url_for('Miinuslaskuja') }}">Miinuslaskuja(-)</a></li>
                <li><a href="{{ url_for('Kertolaskuja') }}">Kertolaskuja(*)</a></li>
                <li><a href="{{ url_for('Jakolaskuja') }}">Jakolaskuja(/)</a></li>
            </ul>
        </div>
    </nav>
        
    <div class="container">
        <h3 class="h3">Jakolaskuja(/)</h3>
        
        <button onclick="location.reload();" class="btn btn-primary btn-sm">Uusi lasku</button>
        
        <p id="lasku" class="p"></p>

        <form>
            <input id="vastaus" type="number" style="width: 150px;" class="form-control">
        </form>
        
        <br>

        <button type="button" class="btn btn-primary" onclick="naytaVastaus()">Näytä vastaus</button>
        
        <p id="Onko"></p>
    </div>
    <script>
        let laskuNäytä = document.getElementById("lasku");
        let vastaus = [];

        let ekaNumero = Math.floor(Math.random() * 10) + 1;
        let tokaNumero = Math.floor(Math.random() * 10) + 1;


        let merkki = "/";

        laskuNäytä.innerHTML = `Lasku: ${ekaNumero} ${merkki} ${tokaNumero}`

        vastaus.push(ekaNumero)
            
        vastaus.push(merkki)
            
        vastaus.push(tokaNumero)

        let v = document.getElementById("vastaus");
        let n = document.getElementById("Onko");
            

        let etsiKertomerkki;
        let etsiJakomerkki;
        let merkkiIndex;
        let tulos = 0;

        function naytaVastaus() {
            let inputShow = v.value

            for (let i = 0; i < vastaus.length; i++) {               
                switch(vastaus[i]) {
                    case "/":
                        merkkiIndex = vastaus.indexOf("/")

                        tulos = vastaus[merkkiIndex-1] / vastaus[merkkiIndex+1];
                            
                        console.log(vastaus[merkkiIndex-1] , vastaus[merkkiIndex+1])
                            
                        vastaus.splice(merkkiIndex-1, merkkiIndex+2, tulos);
                                
                        console.log(vastaus)

                        i = 0;
                        tulos = 0
                        merkkiIndex = 0

                        etsiJakomerkki = vastaus.includes("/")

                        break;       
                }
            }

            if (parseFloat(inputShow) == parseFloat(vastaus[0])) {
                n.innerHTML = "Oikein: " + vastaus[0];
            } else {
                console.log(vastaus)
                n.innerHTML = "Väärin: " + vastaus[0];
            }

        }
    </script>
</body>
</html>